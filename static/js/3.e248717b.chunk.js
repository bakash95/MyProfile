(window.webpackJsonpmyprofile=window.webpackJsonpmyprofile||[]).push([[3],{171:function(e,t,s){e.exports=s.p+"static/media/close_icon.8937407b.svg"},172:function(e,t,s){e.exports=s.p+"static/media/send_icon.d6d8fbc4.svg"},173:function(e,t,s){"use strict";function a(e){return function(e){if(Array.isArray(e)){for(var t=0,s=new Array(e.length);t<e.length;t++)s[t]=e[t];return s}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}s.r(t);var n=s(3),c=s(4),o=s(6),r=s(5),i=s(7),l=s(0),m=s.n(l),u=s(171),d=s.n(u),h=s(172),f=s.n(h),g=function(e){function t(e){var s;return Object(n.a)(this,t),(s=Object(o.a)(this,Object(r.a)(t).call(this,e))).callBack=function(e){"Enter"!==e.key?s.setState({currentMessage:e.target.value}):s.sendMessage()},s.sendMessage=function(){s.refs.input.value="";var e=s.state.currentMessage;e&&""!==e&&(s.props.sendMessage(e),s.setState({currentMessage:""}))},s.keyPress=function(e){13===e.keyCode&&s.sendMessage()},s.state={},s}return Object(i.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return m.a.createElement("div",{className:"chatRoom"},m.a.createElement("input",{type:"text",className:"chatTextbox",ref:"input",onKeyDown:this.keyPress,onChange:this.callBack}),m.a.createElement("img",{className:"chatSend",src:f.a,alt:"send",onClick:this.sendMessage}))}}]),t}(l.Component),p=s(60);s(92);s.d(t,"default",function(){return v});var v=function(e){function t(e){var s;return Object(n.a)(this,t),(s=Object(o.a)(this,Object(r.a)(t).call(this,e))).sendMessage=function(e){var t={message:e,mine:!0};s.setState({messages:[].concat(a(s.state.messages),[t])}),s.state.websocket.send(e)},s.state={messages:[],currentMessage:"",websocket:null,closedChat:!1,closedChatMessage:"Technical Error"},s}return Object(i.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){this.state.websocket.close()}},{key:"componentDidMount",value:function(){var e=this,t=Object(p.a)("ws")+"/profile",s=new WebSocket(t);s.onmessage=function(t){var s={message:t.data,mine:!1};e.setState({messages:[].concat(a(e.state.messages),[s])})},s.onclose=function(t){1006!==t.code?e.setState({closedChat:!0,closedChatMessage:"Sorry your chat timed out as there was no input"}):e.setState({closedChat:!0,closedChatMessage:"Oops there was technical issue!"})},s.onerror=function(t){e.setState({closedChat:!0,closedChatMessage:"Oops there was technical issue!"})},this.setState({websocket:s})}},{key:"componentDidUpdate",value:function(){this.refs.scrollToView&&this.refs.scrollToView.scrollIntoView({behavior:"smooth"})}},{key:"render",value:function(){return m.a.createElement("div",{className:"modalContent"},m.a.createElement("div",{className:"wrapper"},m.a.createElement("div",{className:"chat_title"},m.a.createElement("img",{className:"close",src:d.a,alt:"close",onClick:this.props.closeChat})),m.a.createElement("div",{className:"chatContent"},m.a.createElement("div",{className:"messages"},this.state.messages.map(function(e,t){return e.mine?m.a.createElement("div",{className:"message"},m.a.createElement("div",{className:"self"},e.message)):m.a.createElement("div",{className:"messageTheirs"},m.a.createElement("div",{className:"self"},e.message))}),m.a.createElement("div",{ref:"scrollToView"}))),this.state.closedChat?m.a.createElement("span",{className:"chatClosed"},this.state.closedChatMessage):m.a.createElement(g,{sendMessage:this.sendMessage})))}}]),t}(l.Component)}}]);
//# sourceMappingURL=3.e248717b.chunk.js.map